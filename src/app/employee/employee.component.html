<div class="container-fluid">

  <h3>Zaposleni:</h3>

  <table class="table table-hover">
    <ul class="nav navbar-nav">
      <li>
        <a (click)="onGet()" class="show_hand" id="refresh">
          <img src="assets/images/refresh.gif" />
        </a>
      </li>
      <li class="group-start">
        <a id="first">
          <img src="assets/images/first.gif" />
        </a>
      </li>
      <li>
        <a id="prev">
          <img src="assets/images/prev.gif" />
        </a>
      </li>
      <li>
        <a id="next">
          <img src="assets/images/next.gif" />
        </a>
      </li>
      <li>
        <a id="last">
          <img src="assets/images/last.gif" />
        </a>
      </li>
      <li class="group-start">
        <a (click)="showDialog = !showDialog; actionForModal = 'add'" class="show_hand">
          <img src="assets/images/add.gif" />
        </a>
      </li>
    </ul>

    <tr class="header">
      <th>Ime i prezime</th>
      <th>Ime roditelja</th>
      <th>Datum rodjenja</th>
      <th>Pol</th>
      <th>Strucna sprema</th>
      <th>Radna istorija</th>
      <th>Kontakt podaci</th>
      <th>Deca</th>
      <th></th>
    </tr>
    <tr *ngFor="let employee of employees; let i = index" (click)="setClickedRow(i)" [class.active]="i == selectedRow">
      <td>
        <a href="radnik.html">{{employee.firstName}} {{employee.lastName}}</a>
      </td>
      <td>{{employee.parentName}}</td>
      <td>{{employee.birthDate}}</td>
      <td>{{employee.sex}}</td>
      <td>
        <a (click)="setActive();sendMessage(employee.employeeId);">Strucna sprema</a>
      </td>
      <td>
        <a href="#">Radna istorija</a>
      </td>
      <td>
        <a>Kontant Podaci</a>
      </td>
      <td>
        <a href="#">Deca</a>
      </td>
      <td><a title="Izmena!" class="show_hand" (click)="onEditEmployee(employee.employeeId)">
        <span class="glyphicon glyphicon-edit"></span>
      </a> &nbsp;
      <a title="Brisanje!" class="show_hand">
        <span style="color: red;" class="glyphicon glyphicon-remove"></span>
      </a></td>
    </tr>
  </table>
  <br>
  <hr>
  <div class="container" style="text-align: center">
    <ul class="pagination">
      <li><a href="#">1</a></li>
      <li class="active"><a href="#">2</a></li>
      <li><a href="#">3</a></li>
      <li><a href="#">4</a></li>
      <li><a href="#">5</a></li>
    </ul>
    <br>
  </div>
  <div [hidden]="!EPQclicked">
     <hr>
     <app-employee-professional-qualifications></app-employee-professional-qualifications>
  </div>

  <app-dialog [(visible)]="showDialog">
    <h4>Dodaj zaposlenog</h4>
    <hr>
    <form (ngSubmit)="onSubmit()" class="form-horizontal" #f="ngForm">
      <fieldset>

        <div class="form-group">
          <label class="col-md-4 control-label" for="lastName">Prezime</label>
          <div class="col-md-5">
            <input id="lastName"
                   name="lastName" 
                   type="text" 
                   placeholder="prezime..." 
                   class="form-control input-md" 
                   ngModel required #lastName="ngModel">
            <span class="help-block" *ngIf="lastName.touched && !lastName.valid">Prezime je obavezno.</span>
          </div>
        </div>

        <!-- Text input-->
        <div class="form-group">
          <label class="col-md-4 control-label" for="name">Ime</label>
          <div class="col-md-5">
            <input id="name" 
                   name="name" 
                   type="text" 
                   placeholder="ime..." 
                   class="form-control input-md"
                   ngModel required #firstName="ngModel">
            <span class="help-block" *ngIf="firstName.touched && !firstName.valid">Ime je obavezno.</span>
          </div>
        </div>

        <!-- Text input-->
        <div class="form-group">
          <label class="col-md-4 control-label" for="parentName">Ime roditelja</label>
          <div class="col-md-5">
            <input id="parentName"
                   name="parentName" 
                   type="text" 
                   placeholder="ime jednog roditelja..." 
                   class="form-control input-md"
                   ngModel required #parentName="ngModel">
            <span class="help-block" *ngIf="parentName.touched && !parentName.valid">Ime jednog roditelja je obavezno.</span>
          </div>
        </div>

        <!-- Select Basic -->
        <div class="form-group">
          <label class="col-md-4 control-label" for="sex">Pol</label>
          <div class="col-md-4">
            <select id="sex" name="sex" class="form-control" [ngModel]="defaultSex" required>
              <option value="M">Muski</option>
              <option value="Z">Zenski</option>
            </select>
          </div>
        </div>

        <!-- for date -->
        <div class="form-group">
            <label class="col-md-4 control-label" for="birthDate">Datum rodjenja</label>
            <div class="col-md-5">
              <input class="form-control input-md" style="float: none" placeholder="Select a date" ngx-mydatepicker name="birthDate"
                 [(ngModel)]="model" [options]="myOptions" #dp="ngx-mydatepicker" (dateChanged)="onDateChanged($event)" #datePick="ngModel" required/>
                 <span class="help-block" *ngIf="datePick.touched && !datePick.valid">Uneti datum nije validan.</span>
            </div>
          <span class="input-group-btn control-span">
              <button type="button" class="btn btn-default" (click)="dp.clearDate()">
                  <i class="glyphicon glyphicon-remove"></i>
              </button>
              <button type="button" class="btn btn-default" (click)="dp.toggleCalendar()">
                  <i class="glyphicon glyphicon-calendar"></i>
              </button>
          </span>
        </div>

        <!-- Text input-->
        <div class="form-group">
          <label class="col-md-4 control-label" for="madenName">Devojacko prezime</label>
          <div class="col-md-5">
            <input id="madenName" 
                   name="madenName" 
                   type="text" 
                   placeholder="ostaviti prazno ukoliko ga nema..." 
                   class="form-control input-md" ngModel>
          </div>
        </div>

        <!-- Text input-->
        <div class="form-group">
          <label class="col-md-4 control-label" for="address">Adresa</label>
          <div class="col-md-5">
            <input id="address" 
                   name="address" 
                   type="text" 
                   placeholder="adresa..." 
                   class="form-control input-md" ngModel required #address="ngModel">
                   <span class="help-block" *ngIf="address.touched && !address.valid">Adresa je obavezna.</span>
          </div>
        </div>

        <!-- Text input-->
        <div class="form-group">
          <label class="col-md-4 control-label" for="email">Email</label>
          <div class="col-md-5">
            <input id="email" 
                   name="email" 
                   type="text" 
                   placeholder="email..." 
                   class="form-control input-md" ngModel>
          </div>
        </div>
        <p>
        <!-- Text input-->
        <div class="form-group">
          <label class="col-md-4 control-label" for="phoneNumber">Broj telefona</label>
          <div class="col-md-5">
            <input id="phoneNumber" 
                   name="phoneNumber" 
                   type="text" 
                   placeholder="broj telefona..." 
                   class="form-control input-md" ngModel>
          </div>
        </div>

        <!-- Select Basic -->
        <div class="form-group">
          <label class="col-md-4 control-label" for="companyId">Kompanija</label>
          <div class="col-md-4">
            <select id="companyId" name="companyId" class="form-control" ngModel required>
              <option value="1">Option one</option>
              <option value="2">Option two</option>
            </select>
          </div>
        </div>

        <!-- Select Basic -->
        <div class="form-group">
          <label class="col-md-4 control-label" for="cityId">Grad</label>
          <div class="col-md-4">
            <select id="cityId" name="cityId" class="form-control" ngModel required>
              <option *ngFor="let city of cities" value="{{city.cityId}}">{{city.cityName}}</option>
            </select>
          </div>
        </div>

      </fieldset>

      <hr>
      <div style="text-align: center">
        <button 
          class="btn btn-primary" 
          type="submit" [disabled]="!f.valid">Potvrdi</button>
        <button (click)="showDialog = !showDialog; resetForm();" class="btn">Close</button>
      </div>
      
    </form>

  </app-dialog>
  <!-- Edit modal -->
  <app-dialog [(visible)]="showEditDialog">
    <h4>Izmeni zaposlenog</h4>
    <hr>
    <form (ngSubmit)="onSubmit()" class="form-horizontal" #fE="ngForm">
      <fieldset>

        <div class="form-group">
          <label class="col-md-4 control-label" for="lastName">Prezime</label>
          <div class="col-md-5">
            <input id="lastNameEdit"
                   name="lastNameEdit" 
                   type="text" 
                   placeholder="prezime..." 
                   class="form-control input-md" 
                   ngModel required #lastNameEdit="ngModel" [(ngModel)]="Employee.lastName">
            <span class="help-block" *ngIf="lastNameEdit.touched && !lastNameEdit.valid">Prezime je obavezno.</span>
          </div>
        </div>

        <!-- Text input-->
        <div class="form-group">
          <label class="col-md-4 control-label" for="firstName">Ime</label>
          <div class="col-md-5">
            <input id="firstNameEdit" 
                   name="firstNameEdit" 
                   type="text" 
                   placeholder="ime..." 
                   class="form-control input-md"
                   ngModel required #firstNameEdit="ngModel" [(ngModel)]="Employee.firstName">
            <span class="help-block" *ngIf="firstNameEdit.touched && !firstNameEdit.valid">Ime je obavezno.</span>
          </div>
        </div>

        <!-- Text input-->
        <div class="form-group">
          <label class="col-md-4 control-label" for="parentName">Ime roditelja</label>
          <div class="col-md-5">
            <input id="parentNameEdit"
                   name="parentNameEdit" 
                   type="text" 
                   placeholder="ime jednog roditelja..." 
                   class="form-control input-md"
                   ngModel required #parentNameEdit="ngModel" [(ngModel)]="Employee.parentName">
            <span class="help-block" *ngIf="parentNameEdit.touched && !parentNameEdit.valid">Ime jednog roditelja je obavezno.</span>
          </div>
        </div>

        <!-- Select Basic -->
        <div class="form-group">
          <label class="col-md-4 control-label" for="sex">Pol</label>
          <div class="col-md-4">
            <select id="sexEdit" name="sexEdit" class="form-control" [(ngModel)]="Employee.sex" required>
              <option value="M">Muski</option>
              <option value="Z">Zenski</option>
            </select>
          </div>
        </div>

        <!-- for date -->
        <div class="form-group">
          <label class="col-md-4 control-label" for="birthDateEdit">Datum rodjenja</label>
          <div class="col-md-5">
            <input class="form-control input-md" style="float: none" placeholder="Izaberite datum" ngx-mydatepicker name="birthDateEdit"
            [ngModel]="transormedDate" [options]="myOptions" #dpE="ngx-mydatepicker" (dateChanged)="onDateChanged($event)" #datePickEdit="ngModel" required/>
               <span class="help-block" *ngIf="datePickEdit.touched && !datePickEdit.valid">Uneti datum nije validan.</span>
          </div>
        <span class="input-group-btn control-span">
            <button type="button" class="btn btn-default" (click)="dpE.clearDate()">
                <i class="glyphicon glyphicon-remove"></i>
            </button>
            <button type="button" class="btn btn-default" (click)="dpE.toggleCalendar()">
                <i class="glyphicon glyphicon-calendar"></i>
            </button>
        </span>
      </div>

        <!-- Text input-->
        <div class="form-group">
          <label class="col-md-4 control-label" for="madenNameEdit">Devojacko prezime</label>
          <div class="col-md-5">
            <input id="madenNameEdit" 
                   name="madenNameEdit" 
                   type="text" 
                   placeholder="ostaviti prazno ukoliko ga nema..." 
                   class="form-control input-md" ngModel [(ngModel)]="Employee.madenName">
          </div>
        </div>

        <!-- Text input-->
        <div class="form-group">
          <label class="col-md-4 control-label" for="addressEdit">Adresa</label>
          <div class="col-md-5">
            <input id="addressEdit" 
                   name="addressEdit" 
                   type="text" 
                   placeholder="adresa..." 
                   class="form-control input-md" ngModel #address="ngModel" [(ngModel)]="Employee.address">
          </div>
        </div>

        <!-- Text input-->
        <div class="form-group">
          <label class="col-md-4 control-label" for="emailEdit">Email</label>
          <div class="col-md-5">
            <input id="emailEdit" 
                   name="emailEdit" 
                   type="text" 
                   placeholder="email..." 
                   class="form-control input-md" ngModel [(ngModel)]="Employee.email">
          </div>
        </div>
        <p>
        <!-- Text input-->
        <div class="form-group">
          <label class="col-md-4 control-label" for="phoneNumberEdit">Broj telefona</label>
          <div class="col-md-5">
            <input id="phoneNumberEdit" 
                   name="phoneNumberEdit" 
                   type="text" 
                   placeholder="broj telefona..." 
                   class="form-control input-md" ngModel [(ngModel)]="Employee.phoneNumber">
          </div>
        </div>

        <!-- Select Basic -->
        <div class="form-group">
          <label class="col-md-4 control-label" for="companyIdEdit">Kompanija</label>
          <div class="col-md-4">
            <select id="companyIdEdit" name="companyIdEdit" class="form-control" ngModel required [(ngModel)]="Employee.companyId"> 
              <option value="1">Option one</option>
              <option value="2">Option two</option>
            </select>
          </div>
        </div>

        <!-- Select Basic -->
        <div class="form-group">
          <label class="col-md-4 control-label" for="cityIdEdit">Grad</label>
          <div class="col-md-4">
            <select id="cityIdEdit" name="cityIdEdit" class="form-control" ngModel required [(ngModel)]="Employee.cityId"> 
              <option *ngFor="let city of cities" value="{{city.cityId}}">{{city.cityName}}</option>
            </select>
          </div>
        </div>

      </fieldset>

      <hr>
      <div style="text-align: center">
        <button 
          class="btn btn-primary" 
          type="submit" [disabled]="!fE.valid">Potvrdi</button>
        <button (click)="showEditDialog = !showEditDialog; resetEditForm();" class="btn">Close</button>
      </div>
      
    </form>

  </app-dialog>


  <br>
  
</div>
  <br>
  <br>